name: node js dockerization
on: 
   push:
      branches: 
      - main

jobs: 
 build-and-run:
  runs-on: ubuntu-latest

  steps:
  - name: Checkout code
    uses: actions/checkout@v4

  - name: Docker login
    uses: docker/login-action@v3 
    with: 
     usename: ${{ secrets.DOCKERHUB_USERNAME }} 
     password: ${{ secrets.DOCKERHUB_TOKEN }}

  - name: Build Docker Image
    run: docker build -t test:latest .

  - name: Push Docker Image
    run: |
	docker tag test:latest anjumhiremath196@gmail/test:latest  
	docker push anjumhiremath196@gmail/test:latest

   - name: Deploy Container        
    run: |         
		docker stop test || true          
		docker rm test || true          
		docker pull anjumhiremath196@gmail/test:latest          
		docker run -d --name test -p 8080:8080 anjumhiremath196@gmail/test:latest
					   

   
     
    
    

 


  

